let books = [
  {
    Author: "Aciman, Andr√©",
    Title: "Call Me By Your Name (Call Me By Your Name Series)",
    State: "Virginia",
  },
  {
    Author: "Adichie, Chimamanda Ngozi",
    Title: "Half of a Yellow Sun",
    State: "Michigan",
  },
  {
    Author: "Albertalli, Becky",
    Title: "Leah on the Offbeat (Simonverse Series)",
    State: "Idaho",
  },
  { Author: "Anaya, Rudolfo", Title: "Bless Me, Ultima", State: "Oklahoma" },
  {
    Author: "Angelou, Maya",
    Title: "I Know Why The Caged Bird Sings",
    State: "Oklahoma",
  },
  {
    Author: "Ansari, Aziz",
    Title: "Modern Romance: An Investigation",
    State: "Missouri",
  },
  { Author: "Asano, Inio", Title: "A Girl on the Shore", State: "Ohio" },
  {
    Author: "Atwood, Margaret",
    Title: "The Handmaid's Tale: The Graphic Novel",
    State: "Kansas",
  },
  { Author: "Atwood, Margaret", Title: "The Testaments", State: "Kansas" },
  {
    Author: "Bartoletti, Susan Campbell",
    Title:
      "They Called Themselves The K.K.K.: The Birth of an American Terrorist Group",
    State: "Kansas",
  },
  {
    Author: "Bechdel, Alison",
    Title: "Fun Home: A Family Tragicomic",
    State: "Kansas",
  },
  { Author: "Benway, Robin", Title: "Far from the Tree", State: "Indiana" },
  {
    Author: "Bertie, Alex",
    Title: "Trans Mission: My Quest to a Beard",
    State: "Kansas",
  },
  {
    Author: "Braun, Eric",
    Title: "Protest Movements: Then and Now",
    State: "Wisconsin",
  },
  {
    Author: "Burgess, Rebecca",
    Title: "How to Be Ace: A Memoir of Growing Up Asexual",
    State: "Vermont",
  },
  {
    Author: "Celano, Marianne",
    Title: "Something Happened in Our Town",
    State: "Missouri",
  },
  {
    Author: "Cisneros, Sandra",
    Title: "The House on Mango Street",
    State: "Michigan",
  },
  {
    Author: "Clare, Cassandra",
    Title: "Clockwork Princess (The Infernal Devices Series)",
    State: "Idaho",
  },
  { Author: "Crutcher, Chris", Title: "Whale Talk", State: "Oklahoma" },
  {
    Author: "Douglass, Frederick",
    Title: "Narrative of the Life of Frederick Douglass",
    State: "Oklahoma",
  },
  {
    Author: "Draper, Sharon M.",
    Title: "Darkness Before Dawn",
    State: "North Carolina",
  },
  {
    Author: "Draper, Sharon M.",
    Title: "Forged By Fire",
    State: "North Carolina",
  },
  {
    Author: "Durrow, Heidi W.",
    Title: "The Girl Who Fell from the Sky",
    State: "Kansas",
  },
  {
    Author: "Eggers, Dave",
    Title: "The Circle (The Circle Series)",
    State: "South Dakota",
  },
  {
    Author: "Evaristo, Bernardine",
    Title: "Girl, Woman, Other",
    State: "South Dakota",
  },
  {
    Author: "Faruqi, Saadia",
    Title: "A Place at the Table",
    State: "North Carolina",
  },
  {
    Author: "Finch, Michelle",
    Title:
      "Phoenix Goes to School: A Story to Support Transgender and Gender Diverse Children",
    State: "Indiana",
  },
  { Author: "Forman, Gayle", Title: "I Was Here", State: "Oklahoma" },
  { Author: "Frank, ER", Title: "Life is Funny", State: "North Carolina" },
  {
    Author: "Gaines, Ernest J.",
    Title: "A Lesson Before Dying",
    State: "Virginia",
  },
  {
    Author: "Garvin, Jeff",
    Title: "Symptoms of Being Human",
    State: "Oklahoma",
  },
  { Author: "Gephart, Donna", Title: "Lily and Dunkin", State: "Kansas" },
  { Author: "Girard, M-E", Title: "Girl Mans Up", State: "Georgia" },
  {
    Author: "Glines, Abbi",
    Title: "Bad for You (Sea Breeze Series)",
    State: "Oklahoma",
  },
  { Author: "Golding, William", Title: "Lord of the Flies", State: "Oklahoma" },
  {
    Author: "Green, John",
    Title: "Let it Snow: Three Holiday Romances",
    State: "Wisconsin",
  },
  {
    Author: "Hansberry, Lorraine",
    Title: "A Raisin in the Sun",
    State: "Oklahoma",
  },
  { Author: "Haskins, James", Title: "The Scottsboro Boys", State: "Iowa" },
  {
    Author: "Hernandez, Carlos",
    Title: "Sal and Gabi Break the Universe (Sal and Gabi Series)",
    State: "North Carolina",
  },
  { Author: "Hinton, S. E.", Title: "The Outsiders", State: "Oklahoma" },
  {
    Author: "Hopkins, Ellen",
    Title: "Burned (Burned Series)",
    State: "Oklahoma",
  },
  {
    Author: "Hopkins, Ellen",
    Title: "Fallout (Crank Series)",
    State: "Michigan",
  },
  { Author: "Hopkins, Ellen", Title: "Identical", State: "Michigan" },
  {
    Author: "Hopkins, Ellen",
    Title: "Impulse (Impulse Series)",
    State: "Michigan",
  },
  {
    Author: "Hurston, Zora Neale",
    Title: "Their Eyes Were Watching God",
    State: "Oklahoma",
  },
  {
    Author: "Jewell, Lisa",
    Title: "Invisible Girl: A Novel",
    State: "Missouri",
  },
  {
    Author: "Johnson, Varian",
    Title: "The Parker Inheritance",
    State: "North Carolina",
  },
  { Author: "King, A. S.", Title: "Everybody Sees the Ants", State: "Indiana" },
  { Author: "Kobabe, Maia", Title: "Gender Queer: A Memoir", State: "Alaska" },
  { Author: "Koertge, Ron", Title: "Boy Girl Boy", State: "Michigan" },
  {
    Author: "Kuklin, Susan",
    Title: "Beyond Magenta: Transgender Teens Speak Out",
    State: "Arkansas",
  },
  {
    Author: "Laymon, Kiese",
    Title: "Heavy: An American Memoir",
    State: "Kansas",
  },
  {
    Author: "Lee, Harper",
    Title: "To Kill a Mockingbird",
    State: "North Carolina",
  },
  {
    Author: "Levithan, David",
    Title: "Another Day (Every Day Series)",
    State: "North Carolina",
  },
  {
    Author: "Levithan, David",
    Title: "Every Day (Every Day Series)",
    State: "Indiana",
  },
  {
    Author: "Levithan, David",
    Title:
      "Hold Me Closer: The Tiny Cooper Story (Will Grayson, Will Grayson Series)",
    State: "Oklahoma",
  },
  {
    Author: "Levithan, David",
    Title: "The Realm of Possibility",
    State: "Michigan",
  },
  {
    Author: "Lockington, Mariama J.",
    Title: "For Black Girls Like Me",
    State: "Oklahoma",
  },
  { Author: "Lund, Cameron", Title: "The Best Laid Plans", State: "Michigan" },
  {
    Author: "Madison, Megan",
    Title: "Our Skin: A First Conversation About Race",
    State: "New Jersey",
  },
  {
    Author: "Martin, Ann M.",
    Title: "Boy-Crazy Stacey (The Baby-Sitters Club Series)",
    State: "Missouri",
  },
  {
    Author: "Mbue, Imbolo",
    Title: "How Beautiful We Were",
    State: "South Dakota",
  },
  { Author: "McGinnis, Mindy", Title: "Heroine", State: "Missouri" },
  { Author: "McMann, Lisa", Title: "Fade (Wake Series)", State: "Michigan" },
  {
    Author: "McNeil, Gretchen",
    Title: "#MurderTrending (MurderTrending Series)",
    State: "Kansas",
  },
  { Author: "Medina, Meg", Title: "Burn Baby Burn", State: "Indiana" },
  {
    Author: "Meyer, Marissa",
    Title: "Fairest: Levana's Story (The Lunar Chronicles Series)",
    State: "Oklahoma",
  },
  {
    Author: "Meyer, Stephenie",
    Title: "Eclipse (Twilight Series)",
    State: "Oklahoma",
  },
  { Author: "Myracle, Lauren", Title: "How to Be Bad", State: "Wisconsin" },
  { Author: "Myracle, Lauren", Title: "Shine", State: "Michigan" },
  {
    Author: "Myracle, Lauren",
    Title: "Under the Moon: A Catwoman Tale",
    State: "Wisconsin",
  },
  {
    Author: "Myracle, Lauren",
    Title: "Victor and Nora: A Gotham Love Story",
    State: "Wisconsin",
  },
  {
    Author: "Myracle, Lauren",
    Title: "yolo (Internet Girls Series)",
    State: "Wisconsin",
  },
  { Author: "Nabokov, Vladimir", Title: "Lolita", State: "Utah" },
  { Author: "Newman, Leslea", Title: "Sparkle Boy", State: "Indiana" },
  {
    Author: "Norton, Preston",
    Title: "Neanderthal Opens the Door to the Universe",
    State: "Wisconsin",
  },
  {
    Author: "Noxon, Christopher",
    Title: "Good Trouble: Lessons from the Civil Rights Playbook",
    State: "Virginia",
  },
  { Author: "Oliver, Lauren", Title: "Before I Fall", State: "Oklahoma" },
  { Author: "Oliver, Lauren", Title: "Broken Things", State: "Oklahoma" },
  {
    Author: "Oshiro, Mark",
    Title: "Anger Is a Gift: A Novel",
    State: "Kansas",
  },
  {
    Author: "Otsuka, Julie",
    Title: "When the Emperor Was Divine",
    State: "Wisconsin",
  },
  {
    Author: "Pardes, Bronwen",
    Title:
      "Doing It Right: Making Smart, Safe, and Satisfying Choices About Sex",
    State: "Indiana",
  },
  {
    Author: "Paterson, Katherine",
    Title: "Bridge to Terabithia",
    State: "Oklahoma",
  },
  {
    Author: "Perez, Ashley Hope",
    Title: "Out of Darkness",
    State: "North Carolina",
  },
  {
    Author: "Pierce, Tamora",
    Title: "Mastiff (Beka Cooper Series)",
    State: "Oklahoma",
  },
  {
    Author: "Quintero, Isabel",
    Title: "Gabi, a Girl in Pieces",
    State: "Missouri",
  },
  { Author: "Rapp, Adam", Title: "33 Snowfish", State: "Idaho" },
  {
    Author: "Rennison, Louise",
    Title:
      "On the Bright Side, I'm Now the Girlfriend of a Sex God (Confessions of Georgia Nicolson #2)",
    State: "Michigan",
  },
  {
    Author: "Rhodes-Courter, Ashley",
    Title: "Three Little Words: A Memoir",
    State: "Indiana",
  },
  { Author: "Rivera, Gabby", Title: "Juliet Takes a Breath", State: "Georgia" },
  {
    Author: "Roleff, Tamara L.",
    Title: "Satanism (At Issue)",
    State: "Kansas",
  },
  {
    Author: "Rosen, L. C.",
    Title: "Jack of Hearts (and other parts)",
    State: "New York",
  },
  {
    Author: "Roux, Madeleine",
    Title: "House of Furies (House of Furies Series)",
    State: "Oklahoma",
  },
  {
    Author: "San Francisco Writers' Grotto",
    Title: "642 Things to Write About",
    State: "Ohio",
  },
  { Author: "Santoni, V. S.", Title: "I'm A Gay Wizard", State: "Virginia" },
  {
    Author: "Schwab, V. E.",
    Title: "The Invisible Life of Addie LaRue",
    State: "Georgia",
  },
  {
    Author: "Schwartz, Alvin",
    Title: "Scary Stories to Tell in the Dark",
    State: "Oklahoma",
  },
  { Author: "Seabold, Alice", Title: "Lucky", State: "Virginia" },
  { Author: "Sebold, Alice", Title: "The Lovely Bones", State: "Oklahoma" },
  {
    Author: "Sepetys, Ruta",
    Title: "Between Shades of Gray",
    State: "Oklahoma",
  },
  {
    Author: "Slater, Dashka",
    Title:
      "The 57 Bus: A True Story of Two Teenagers and the Crime That Changed Their Lives",
    State: "Idaho",
  },
  { Author: "Smith, Amber", Title: "The Way I Used to Be", State: "Oklahoma" },
  { Author: "Sparks, Beatrice", Title: "Go Ask Alice", State: "Michigan" },
  {
    Author: "Stein, Garth",
    Title: "The Art of Racing in the Rain",
    State: "Michigan",
  },
  { Author: "Stone, Nic", Title: "Clean Getaway", State: "North Carolina" },
  {
    Author: "Ten Boom, Corrie",
    Title: "The Hiding Place: The Triumphant True Story of Corrie Ten Boom",
    State: "Oklahoma",
  },
  {
    Author: "Todd, Anna",
    Title: "After We Collided (After Series)",
    State: "Georgia",
  },
  {
    Author: "Ukazu, Ngozi",
    Title: "#Hockey (Check, Please! Series)",
    State: "Georgia",
  },
  {
    Author: "Vaughan, Brian K.",
    Title: "Saga, Volume 1 (Saga Series)",
    State: "Illinois",
  },
  { Author: "Volponi, Paul", Title: "Black and White", State: "New Jersey" },
  { Author: "Walton, Jessica", Title: "Introducing Teddy", State: "Indiana" },
  {
    Author: "Wang, Jen",
    Title: "The Prince and the Dressmaker",
    State: "Idaho",
  },
  {
    Author: "Warga, Jasmine",
    Title: "The Shape of Thunder",
    State: "North Carolina",
  },
  {
    Author: "Weingarten, Lynn",
    Title: "Suicide Notes From Beautiful Girls",
    State: "Oklahoma",
  },
  {
    Author: "White, Kiersten",
    Title: "The Dark Descent of Elizabeth Frankenstein",
    State: "Oklahoma",
  },
  { Author: "Wiesel, Elie", Title: "Night", State: "North Carolina" },
  { Author: "Wilson, August", Title: "Fences", State: "Kansas" },
];
let placesDOM = [];
placesDOM = document.querySelectorAll(".link");
placesDOM.forEach((place) => {
  books.forEach((book) => {
    if (book.State == place.innerHTML) {
      let div = document.createElement("div");
      let Author = document.createElement("p");
      Author.innerHTML = book.Author;
      Author.setAttribute("class", "Author");
      let Title = document.createElement("p");
      Title.innerHTML = book.Title;
      Title.setAttribute("class", "Title");
      let placeContainer = place.closest("div");
      div.append(Title, Author);
      div.setAttribute("class", "click");
      placeContainer.append(div);
    }
  });
});
let clickDiv = document.querySelectorAll(".click");
for (let index = 0; index < clickDiv.length; index++) {
  const click = clickDiv[index];
  click.addEventListener("click", function () {
    let title = click.querySelector(".Title").innerHTML;
    title = formatTitle(title);
    console.log(title);
    changePage2();
    openDataFile(title);
  });
}
changePage1();
function formatTitle(searchTerm) {
  searchTerm = searchTerm.split("(")[0].toLowerCase().replace(/\s+/g, "");
  if (searchTerm.split(":")) {
    searchTerm = searchTerm.split(":")[0];
  }
  searchTerm = searchTerm.replace(/[^a-zA-Z0-9 ]/g, "");
  // console.log(searchTerm);
  return searchTerm;
}
let bookCaptionIndex = 0;
let dataFileMain = [];
let cross = document.querySelector("#cross");
cross.addEventListener("click", function () {
  changePage1();
});
let back = document.querySelector("#back");
back.addEventListener("click", function () {
  bookCaptionIndex--;
  if (bookCaptionIndex > 0) displayDataFile(dataFileMain);
});
let next = document.querySelector("#next");
next.addEventListener("click", function () {
  bookCaptionIndex++;
  if (bookCaptionIndex > 0) displayDataFile(dataFileMain);
});
function changePage2() {
  document.querySelector("#page1").style.display = "flex";
  document.querySelector("#page2").style.display = "block";
  document.querySelector("#page3").style.display = "none";
}
function changePage1() {
  document.querySelector("#page1").style.display = "flex";
  document.querySelector("#page2").style.display = "none";
  document.querySelector("#page3").style.display = "none";
}
function changePage3() {
  document.querySelector("#page1").style.display = "none";
  document.querySelector("#page2").style.display = "none";
  document.querySelector("#page3").style.display = "block";
}
function openDataFile(fileName) {
  fetch(`../data/books_shorts/${fileName}.json`)
    .then((res) => {
      return res.json();
    })
    .then((dataFile) => {
      console.log(dataFile);
      dataFileMain = dataFile;
      displayDataFile(dataFile);
    })
    .catch(function (error) {
      console.log("whoops");
      document.querySelector("#contentCaption").innerHTML = "No data found";
      document.querySelector("#arrows").style.display = "none";
    });
}
function displayDataFile(data) {
  // document.querySelector("#contentImg").src = data[bookCaptionIndex].url; //some CORS type issues
  document.querySelector("#arrows").style.display = "flex";
  document.querySelector("#contentCaption").innerHTML =
    data[bookCaptionIndex % data.length].text;
}
